---
- name: Docker config
  hosts: hurley
  become: no
  tasks:

    - name: copy service file
      copy: 
        src: templates/hurley_docker-compose.yml
        dest: /home/riley/docker-compose.yml

    - name: copy homer file
      template: 
        src: templates/homer.yml
        dest: /home/riley/appdata/homer/config.yml

    - name: copy caddy file
      template: 
        src: templates/Caddyfile
        dest: /home/riley/appdata/Caddyfile
    
    - shell:
        cmd: docker compose up -d --remove-orphans
        chdir: /home/riley
